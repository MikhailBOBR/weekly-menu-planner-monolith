<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Персональный план питания</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      :root {
        --bg: #05060a;
        --card: rgba(15, 23, 42, 0.82);
        --panel: rgba(15, 23, 42, 0.92);
        --border: rgba(255, 255, 255, 0.08);
        --accent: #8b5cf6;
        --accent-2: #06b6d4;
        --text: #f8fafc;
        --muted: #94a3b8;
        --radius: 1.25rem;
        --shadow: 0 25px 50px rgba(2, 6, 23, 0.55);
      }

      body[data-theme="light"] {
        --bg: #f5f7fb;
        --card: rgba(255, 255, 255, 0.95);
        --panel: rgba(255, 255, 255, 0.98);
        --border: rgba(15, 23, 42, 0.09);
        --accent: #2563eb;
        --accent-2: #14b8a6;
        --text: #0f172a;
        --muted: #475569;
        --shadow: 0 20px 40px rgba(15, 23, 42, 0.1);
      }

      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: "Manrope", "Inter", "Segoe UI", system-ui, -apple-system, sans-serif;
        color: var(--text);
        background: var(--bg);
        min-height: 100vh;
        line-height: 1.5;
      }
      ::selection {
        background: rgba(139, 92, 246, 0.35);
        color: var(--text);
      }

      .page {
        position: relative;
        min-height: 100vh;
        padding: 2.5rem clamp(1.25rem, 4vw, 3rem) 4rem;
        background: linear-gradient(145deg, rgba(2,6,23,0.95), rgba(15,23,42,0.85));
        overflow: hidden;
      }
      body[data-theme="light"] .page {
        background: linear-gradient(145deg, #f8fafc, #e2e8f0);
      }

      .glow {
        position: absolute;
        width: 520px;
        height: 520px;
        background: radial-gradient(circle, rgba(14,165,233,0.28), transparent 65%);
        filter: blur(35px);
        z-index: 0;
      }
      .glow-1 { top: -120px; left: -40px; }
      .glow-2 {
        right: 6%;
        bottom: -40px;
        background: radial-gradient(circle, rgba(139,92,246,0.28), transparent 65%);
      }
      body[data-theme="light"] .glow { opacity: 0.35; }

      .container {
        max-width: 1280px;
        margin: 0 auto;
        position: relative;
        z-index: 1;
      }

      .nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 2rem;
        gap: 1.25rem;
        flex-wrap: wrap;
      }
      .brand {
        display: flex;
        flex-direction: column;
        gap: 0.2rem;
      }
      .logo { font-weight: 700; font-size: 1.4rem; letter-spacing: 0.08em; }
      .logo span { color: var(--accent-2); }
      .tagline { margin: 0; color: var(--muted); font-size: 0.9rem; }
      .nav-actions { display: flex; flex-wrap: wrap; align-items: center; gap: 0.75rem; }
      .pill-button {
        display: inline-flex;
        align-items: center;
        gap: 0.3rem;
        border: 1px solid var(--border);
        border-radius: 999px;
        padding: 0.45rem 0.85rem;
        background: rgba(255,255,255,0.08);
        color: var(--text);
        cursor: pointer;
        font-size: 0.85rem;
        transition: transform 0.15s ease, box-shadow 0.15s ease;
      }
      .pill-button:hover { transform: translateY(-1px); box-shadow: 0 8px 15px rgba(15,23,42,0.25); }
      body[data-theme="light"] .pill-button { background: rgba(113,128,150,0.1); border-color: rgba(15,23,42,0.08); }
      .nav-chips { display: flex; flex-wrap: wrap; gap: 0.5rem; }
      .chip {
        padding: 0.35rem 0.85rem;
        border-radius: 999px;
        font-size: 0.75rem;
        background: rgba(255,255,255,0.08);
        border: 1px solid var(--border);
        color: var(--muted);
      }
      body[data-theme="light"] .chip {
        background: rgba(63,84,110,0.08);
        color: #374151;
      }

      .theme-toggle {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        border: 1px solid var(--border);
        border-radius: 999px;
        padding: 0.35rem 0.75rem;
        background: rgba(255,255,255,0.08);
        color: var(--text);
        cursor: pointer;
        transition: border 0.2s ease, background 0.2s ease;
      }
      body[data-theme="light"] .theme-toggle {
        background: rgba(113,128,150,0.1);
        border-color: rgba(15,23,42,0.1);
      }
      .theme-toggle__track {
        width: 42px;
        height: 22px;
        border-radius: 999px;
        background: rgba(255,255,255,0.2);
        position: relative;
      }
      body[data-theme="light"] .theme-toggle__track {
        background: rgba(148,163,184,0.35);
      }
      .theme-toggle__thumb {
        position: absolute;
        top: 2px;
        left: 2px;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: white;
        transition: transform 0.2s ease;
      }
      body[data-theme="light"] .theme-toggle__thumb {
        transform: translateX(20px);
        background: #0f172a;
      }
      .theme-toggle__icons { display: flex; gap: 0.2rem; font-size: 0.8rem; color: var(--muted); }

      .hero { text-align: center; margin-bottom: 2.5rem; }
      .title { font-size: clamp(2rem, 4vw, 3.6rem); margin: 0; font-weight: 700; }
      .title span { color: var(--accent-2); }
      .subtitle { margin: 0.75rem auto 0; max-width: 720px; color: var(--muted); }

      .panel {
        background: var(--panel);
        border-radius: var(--radius);
        padding: clamp(1.25rem, 3vw, 1.75rem);
        border: 1px solid var(--border);
        box-shadow: var(--shadow);
        margin-bottom: 2rem;
        backdrop-filter: blur(25px);
      }
      .panel h2 { margin-top: 0; font-size: 1.2rem; }
      .panel-hint { font-size: 0.85rem; color: var(--muted); margin: 0 0 1rem; }
      .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
      label { display: flex; flex-direction: column; gap: 0.35rem; font-size: 0.9rem; color: var(--muted); }
      input, select, textarea {
        border: 1px solid var(--border);
        background: rgba(15,23,42,0.65);
        color: var(--text);
        border-radius: 0.8rem;
        padding: 0.65rem 0.85rem;
        font-size: 0.95rem;
        font-family: inherit;
        transition: border 0.2s ease, box-shadow 0.2s ease;
      }
      body[data-theme="light"] input,
      body[data-theme="light"] select,
      body[data-theme="light"] textarea {
        background: rgba(255,255,255,0.95);
      }
      input:focus,
      select:focus,
      textarea:focus {
        outline: none;
        border-color: var(--accent-2);
        box-shadow: 0 0 0 2px rgba(6,182,212,0.25);
      }
      textarea { min-height: 80px; resize: vertical; }

      .actions { margin-top: 1.75rem; display: flex; flex-wrap: wrap; gap: 1rem; justify-content: flex-end; }
      button { border: none; border-radius: 0.9rem; padding: 0.85rem 1.6rem; font-size: 0.95rem; font-weight: 600; cursor: pointer; transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease; }
      button.primary { background: linear-gradient(135deg, var(--accent), var(--accent-2)); color: var(--text); box-shadow: 0 12px 25px rgba(6,182,212,0.35); }
      body[data-theme="light"] button.primary { color: #f8fafc; }
      button.outline { background: transparent; border: 1px solid var(--border); color: var(--text); }
      button:disabled { opacity: 0.5; cursor: default; transform: none; box-shadow: none; }
      button:not(:disabled):hover { transform: translateY(-2px); box-shadow: 0 18px 30px rgba(6,182,212,0.25); }

      .day-pref-wrapper { margin-top: 1.75rem; border-top: 1px solid var(--border); padding-top: 1.5rem; }
      .day-pref-header { display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between; gap: 1rem; margin-bottom: 1rem; }
      .day-pref-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1rem; }
      .day-pref-card { border: 1px solid rgba(255,255,255,0.06); border-radius: 1rem; padding: 1rem; background: rgba(15,23,42,0.7); backdrop-filter: blur(20px); }
      body[data-theme="light"] .day-pref-card { background: rgba(255,255,255,0.95); border-color: var(--border); }
      .day-pref-card h4 { margin: 0 0 0.35rem; }

      .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem; }
      .stats-card { border-radius: 1.1rem; padding: 1.25rem; background: linear-gradient(145deg, rgba(139,92,246,0.15), rgba(6,182,212,0.12)); border: 1px solid var(--border); box-shadow: var(--shadow); }
      .stats-card small { text-transform: uppercase; letter-spacing: 0.1em; color: var(--muted); }
      .stats-card strong { font-size: 1.85rem; display: block; margin-top: 0.5rem; }

      .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; }
      .card { background: var(--card); border-radius: 1.1rem; border: 1px solid rgba(255,255,255,0.04); padding: 1.1rem; box-shadow: 0 20px 35px rgba(2,6,23,0.5); display: flex; flex-direction: column; backdrop-filter: blur(25px); }
      body[data-theme="light"] .card { border-color: rgba(15,23,42,0.08); box-shadow: var(--shadow); }
      .card-header { display: flex; justify-content: space-between; align-items: center; font-weight: 600; margin-bottom: 0.85rem; }
      .day-total { font-size: 0.85rem; color: var(--muted); }
      .meal-row { border: 1px solid rgba(255,255,255,0.06); border-radius: 0.85rem; padding: 0.9rem; margin-bottom: 0.85rem; cursor: pointer; background: rgba(255,255,255,0.02); transition: transform 0.15s ease, border-color 0.15s ease, background 0.15s ease; }
      .meal-row:hover { border-color: var(--accent-2); background: rgba(6,182,212,0.08); transform: translateY(-2px); }
      body[data-theme="light"] .meal-row { border-color: rgba(15,23,42,0.08); background: rgba(15,23,42,0.02); }
      body[data-theme="light"] .meal-row:hover { background: rgba(20,184,166,0.12); }
      .meal-title { margin: 0 0 0.35rem; font-weight: 600; }
      .meal-meta { display: flex; gap: 0.75rem; font-size: 0.85rem; color: var(--muted); flex-wrap: wrap; }
      .badge { display: inline-flex; align-items: center; gap: 0.25rem; padding: 0.15rem 0.65rem; border-radius: 999px; font-size: 0.7rem; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05); }
      .badge[data-diet="REGULAR"] { color: #7c3aed; border-color: rgba(124,58,237,0.35); background: rgba(124,58,237,0.08); }
      .badge[data-diet="VEGAN"] { color: #16a34a; border-color: rgba(22,163,74,0.35); background: rgba(22,163,74,0.08); }
      .badge[data-diet="KETO"] { color: #0ea5e9; border-color: rgba(14,165,233,0.35); background: rgba(14,165,233,0.08); }
      body[data-theme="light"] .badge { border-color: rgba(15,23,42,0.08); }

      .library { background: var(--panel); border-radius: var(--radius); padding: clamp(1.25rem, 3vw, 1.75rem); border: 1px solid var(--border); box-shadow: var(--shadow); margin-top: 2.5rem; }
      .library-header { display: flex; flex-wrap: wrap; justify-content: space-between; gap: 1rem; margin-bottom: 1.25rem; }
      .library-body { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 1.5rem; }
      #recipes-list { display: flex; flex-direction: column; gap: 1rem; max-height: 800px; overflow-y: auto; padding-right: 0.5rem; }
      .recipe-item { border: 1px solid rgba(255,255,255,0.06); border-radius: 1rem; padding: 1rem; background: rgba(15,23,42,0.7); }
      .notes-modal-layout { display: grid; grid-template-columns: minmax(0, 1fr) minmax(0, 0.9fr); gap: 1.25rem; margin-top: 1rem; }
      .notes-textarea { width: 100%; min-height: 220px; border-radius: 0.9rem; border: 1px solid var(--border); background: rgba(15,23,42,0.65); color: var(--text); padding: 0.85rem; font-family: inherit; resize: vertical; }
      body[data-theme="light"] .notes-textarea { background: rgba(255,255,255,0.95); }
      .notes-list { border: 1px dashed var(--border); border-radius: 0.9rem; padding: 0.9rem; display: flex; flex-direction: column; gap: 0.75rem; background: rgba(15,23,42,0.35); }
      body[data-theme="light"] .notes-list { background: rgba(255,255,255,0.75); }
      .notes-list h3 { margin: 0; font-size: 1rem; }
      .notes-items { list-style: disc; margin: 0; padding-left: 1.25rem; display: flex; flex-direction: column; gap: 0.35rem; }
      .notes-empty { color: var(--muted); font-size: 0.9rem; }
      @media (max-width: 720px) {
        .notes-modal-layout { grid-template-columns: 1fr; }
      }
      .recipe-item h4 { margin: 0 0 0.4rem; }
      .recipe-item .meta { font-size: 0.8rem; color: var(--muted); margin-bottom: 0.75rem; }
      .recipe-item .mini-actions { display: flex; gap: 0.5rem; }
      body[data-theme="light"] .recipe-item { background: rgba(255,255,255,0.95); border-color: var(--border); }

      .modal { position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; background: rgba(2,6,23,0.85); backdrop-filter: blur(20px); z-index: 100; }
      .modal.hidden { display: none; }
      .modal-card { background: rgba(15,23,42,0.95); border-radius: 1.2rem; padding: 1.5rem; width: min(480px, 92vw); max-height: 90vh; overflow-y: auto; border: 1px solid var(--border); position: relative; }
      body[data-theme="light"] .modal { background: rgba(15,23,42,0.35); }
      body[data-theme="light"] .modal-card { background: rgba(255,255,255,0.96); border-color: rgba(15,23,42,0.1); color: #0f172a; }
      .close-btn { position: absolute; top: 0.6rem; right: 0.6rem; border: none; background: transparent; font-size: 1.6rem; cursor: pointer; color: var(--muted); }

      .footer { margin-top: 3rem; text-align: center; font-size: 0.85rem; color: var(--muted); }
      @media (max-width: 640px) {
        .panel { padding: 1rem; }
        .actions { justify-content: center; }
        .day-pref-header { flex-direction: column; align-items: flex-start; }
      }
    </style>
  </head>
  <body data-theme="dark">
    <div class="page">
      <div class="glow glow-1"></div>
      <div class="glow glow-2"></div>
      <div class="container">
        <nav class="nav">
          <div class="brand">
            <div class="logo">nutri<span>craft</span></div>
            <p class="tagline">Локальный интеллект питания без облака и подписок</p>
          </div>
          <div class="nav-actions">
            <div class="nav-chips">
              <span class="chip">Spring Boot</span>
              <span class="chip">H2 Database</span>
              <span class="chip">Vanilla JS UI</span>
            </div>
            <button type="button" class="pill-button" id="help-button">ℹ️ Гид</button>
            <button type="button" class="pill-button" id="about-button">👤 Об авторе</button>
            <button type="button" class="pill-button" id="version-button">🧾 Версия</button>
            <button type="button" class="pill-button" id="notes-button">📝 Заметки</button>
            <button id="theme-toggle" class="theme-toggle" type="button" aria-label="Переключить тему">
              <span class="theme-toggle__track"><span class="theme-toggle__thumb"></span></span>
              <span class="theme-toggle__icons"><span>☀️</span><span>🌙</span></span>
            </button>
          </div>
        </nav>
        <header class="hero">
          <h1 class="title">Персональный <span>план питания</span></h1>
          <p class="subtitle">
            Подбирайте рацион для женщин и мужчин разных возрастов, кликайте на блюда, редактируйте ингредиенты и храните всё локально.
          </p>
        </header>

        <section class="panel">
          <h2>Профиль и цели</h2>
          <form id="profile-form">
            <div class="form-grid">
              <label>Пол<select name="gender"><option value="FEMALE">Женский</option><option value="MALE">Мужской</option></select></label>
              <label>Возраст<input type="number" name="age" value="30" min="16" max="90" /></label>
              <label>Рост (см)<input type="number" name="height" value="165" min="120" max="220" /></label>
              <label>Вес (кг)<input type="number" name="weight" value="60" min="40" max="200" /></label>
              <label>Активность<select name="activity"><option value="LOW">Минимальная</option><option value="MODERATE" selected>Умеренная</option><option value="ACTIVE">Тренируюсь 3-4 раза</option><option value="VERY_ACTIVE">Каждый день</option></select></label>
              <label>Цель<select name="goal"><option value="LOSE">Похудение</option><option value="MAINTAIN" selected>Поддержание</option><option value="GAIN">Набор</option></select></label>
              <label>Диета<select name="diet"><option value="ALL">Без ограничений</option><option value="REGULAR">Обычная</option><option value="VEGAN">Веган</option><option value="KETO">Кето</option></select></label>
              <label>Приёмов пищи<select name="mealsPerDay"><option value="3" selected>3</option><option value="4">4</option><option value="5">5</option></select></label>
              <label>Ручная норма ккал<input type="number" name="manualCalories" placeholder="Например 2100" min="1000" max="4000" /></label>
              <label>Исключить ингредиенты<input type="text" name="excludedIngredients" placeholder="орехи, глютен..." /></label>
              <label>Доп. перекусы<select name="includeSnack"><option value="false">Только по графику</option><option value="true">Добавить перекус</option></select></label>
            </div>
            <div class="day-pref-wrapper">
              <div class="day-pref-header">
                <div>
                  <h3>Предпочтения по дням</h3>
                  <p class="panel-hint">Задайте отдельную диету, кухню или ключевые слова для любого дня недели.</p>
                </div>
                <div class="day-pref-actions">
                  <button type="button" class="outline" id="clear-day-prefs">Очистить предпочтения</button>
                </div>
              </div>
              <div class="day-pref-grid" id="day-pref-grid">
                <div class="day-pref-card">
                  <h4>Понедельник</h4>
                  <label>Диета<select data-role="day-diet" data-day="Понедельник"><option value="">Общие настройки</option><option value="REGULAR">Обычная</option><option value="VEGAN">Веган</option><option value="KETO">Кето</option></select></label>
                  <label>Кухня<input type="text" data-role="day-cuisine" data-day="Понедельник" placeholder="Например, Итальянская" /></label>
                  <label>Ключевые слова<input type="text" data-role="day-keywords" data-day="Понедельник" placeholder="рыба, суп" /></label>
                </div>
                <div class="day-pref-card">
                  <h4>Вторник</h4>
                  <label>Диета<select data-role="day-diet" data-day="Вторник"><option value="">Общие настройки</option><option value="REGULAR">Обычная</option><option value="VEGAN">Веган</option><option value="KETO">Кето</option></select></label>
                  <label>Кухня<input type="text" data-role="day-cuisine" data-day="Вторник" placeholder="Например, Азиатская" /></label>
                  <label>Ключевые слова<input type="text" data-role="day-keywords" data-day="Вторник" placeholder="курица, суп" /></label>
                </div>
                <div class="day-pref-card">
                  <h4>Среда</h4>
                  <label>Диета<select data-role="day-diet" data-day="Среда"><option value="">Общие настройки</option><option value="REGULAR">Обычная</option><option value="VEGAN">Веган</option><option value="KETO">Кето</option></select></label>
                  <label>Кухня<input type="text" data-role="day-cuisine" data-day="Среда" placeholder="Например, Грузинская" /></label>
                  <label>Ключевые слова<input type="text" data-role="day-keywords" data-day="Среда" placeholder="овощи, суп" /></label>
                </div>
                <div class="day-pref-card">
                  <h4>Четверг</h4>
                  <label>Диета<select data-role="day-diet" data-day="Четверг"><option value="">Общие настройки</option><option value="REGULAR">Обычная</option><option value="VEGAN">Веган</option><option value="KETO">Кето</option></select></label>
                  <label>Кухня<input type="text" data-role="day-cuisine" data-day="Четверг" placeholder="Например, Русская" /></label>
                  <label>Ключевые слова<input type="text" data-role="day-keywords" data-day="Четверг" placeholder="суп, крупы" /></label>
                </div>
                <div class="day-pref-card">
                  <h4>Пятница</h4>
                  <label>Диета<select data-role="day-diet" data-day="Пятница"><option value="">Общие настройки</option><option value="REGULAR">Обычная</option><option value="VEGAN">Веган</option><option value="KETO">Кето</option></select></label>
                  <label>Кухня<input type="text" data-role="day-cuisine" data-day="Пятница" placeholder="Например, Мексиканская" /></label>
                  <label>Ключевые слова<input type="text" data-role="day-keywords" data-day="Пятница" placeholder="острое, рыба" /></label>
                </div>
                <div class="day-pref-card">
                  <h4>Суббота</h4>
                  <label>Диета<select data-role="day-diet" data-day="Суббота"><option value="">Общие настройки</option><option value="REGULAR">Обычная</option><option value="VEGAN">Веган</option><option value="KETO">Кето</option></select></label>
                  <label>Кухня<input type="text" data-role="day-cuisine" data-day="Суббота" placeholder="Например, Средиземноморская" /></label>
                  <label>Ключевые слова<input type="text" data-role="day-keywords" data-day="Суббота" placeholder="десерт, паста" /></label>
                </div>
                <div class="day-pref-card">
                  <h4>Воскресенье</h4>
                  <label>Диета<select data-role="day-diet" data-day="Воскресенье"><option value="">Общие настройки</option><option value="REGULAR">Обычная</option><option value="VEGAN">Веган</option><option value="KETO">Кето</option></select></label>
                  <label>Кухня<input type="text" data-role="day-cuisine" data-day="Воскресенье" placeholder="Например, Авторская" /></label>
                  <label>Ключевые слова<input type="text" data-role="day-keywords" data-day="Воскресенье" placeholder="гриль, салат" /></label>
                </div>
              </div>
            </div>
            <div class="actions">
              <button class="outline" type="reset" id="reset-form">Сбросить</button>
              <button class="primary" type="submit" id="generate-btn">Собрать план</button>
            </div>
          </form>
        </section>

        <section id="stats-panel" class="stats" hidden>
          <div class="stats-card">
            <small>Целевая норма</small>
            <strong id="stats-target">0 ккал</strong>
          </div>
          <div class="stats-card">
            <small>Среднее по плану</small>
            <strong id="stats-average">0 ккал</strong>
          </div>
          <div class="stats-card">
            <small>Калорий за неделю</small>
            <strong id="stats-week">0 ккал</strong>
          </div>
        </section>

        <section>
          <div id="plan-root" class="grid"></div>
        </section>

        <section class="library">
          <div class="library-header">
            <div>
              <h2>Библиотека рецептов</h2>
              <p class="panel-hint">Редактируйте блюда, и генератор мгновенно подстроится под ваши вкусы.</p>
            </div>
            <button class="outline" id="refresh-recipes" type="button">Обновить список</button>
          </div>
          <div class="library-body">
            <div id="recipes-list"></div>
            <form id="recipe-form">
              <h3 id="recipe-form-title">Новое блюдо</h3>
              <div class="form-grid">
                <label>Название<input type="text" name="title" required /></label>
                <label>Тип диеты<select name="dietType" required><option value="REGULAR">Обычная</option><option value="VEGAN">Веган</option><option value="KETO">Кето</option></select></label>
                <label>Приём пищи<select name="mealType" required><option value="BREAKFAST">Завтрак</option><option value="SNACK">Перекус</option><option value="LUNCH">Обед</option><option value="DINNER">Ужин</option></select></label>
                <label>Калории<input type="number" name="calories" required min="50" /></label>
                <label>Белки (г)<input type="number" name="protein" min="0" /></label>
                <label>Стоимость (₽)<input type="number" name="price" min="0" /></label>
                <label>Кухня<input type="text" name="cuisine" /></label>
                <label>Время (мин)<input type="number" name="cookingTime" min="5" /></label>
                <label>Ссылка на фото<input type="url" name="imageUrl" /></label>
              </div>
              <label>Краткое описание<textarea name="description"></textarea></label>
              <label>Ингредиенты через запятую<textarea name="ingredients" required></textarea></label>
              <label>Пошаговый рецепт<textarea name="instructions" required></textarea></label>
              <div class="actions">
                <button type="button" class="outline" id="cancel-edit">Отмена</button>
                <button type="button" class="outline" id="delete-recipe">Удалить</button>
                <button type="submit" class="primary">Сохранить</button>
              </div>
            </form>
          </div>
        </section>

        <div class="footer">Spring Boot + H2 · Все данные хранятся локально · 2025</div>
      </div>
    </div>

    <div id="recipe-modal" class="modal hidden">
      <div class="modal-card">
        <button class="close-btn" id="modal-close" aria-label="Закрыть окно">&times;</button>
        <div id="modal-body"></div>
      </div>
    </div>

    <div id="help-modal" class="modal hidden">
      <div class="modal-card">
        <button class="close-btn" id="help-close" aria-label="Закрыть инструкцию">&times;</button>
        <h2>Как пользоваться приложением</h2>
        <p>Этот гид шаг за шагом проведёт через основные возможности:</p>
        <ol>
          <li><strong>Профиль и цели.</strong> Укажите пол, возраст, рост, вес, уровень активности и цель (похудение/поддержание/набор). Эти параметры используются для расчёта нормы калорий. Если нужна точность, задайте «Ручную норму ккал».</li>
          <li><strong>Ограничения.</strong> Через поле «Исключить ингредиенты» можно перечислить продукты (через запятую), которые не должны появляться в меню.</li>
          <li><strong>Предпочтения по дням.</strong> Для каждого дня недели задайте диету (REGULAR, VEGAN, KETO), тип кухни и ключевые слова (например, «суп, рыба»). Пустые поля используют глобальные настройки.</li>
          <li><strong>Генерация.</strong> Нажмите «Собрать план». Карточки покажут три приёма пищи на день с калорийностью и типом диеты. Клик по блюду откроет рецепт с ингредиентами и инструкциями.</li>
          <li><strong>Библиотека рецептов.</strong> Добавляйте, редактируйте или удаляйте блюда. Меню автоматически обновляется после сохранения изменений.</li>
          <li><strong>Переключатель темы.</strong> Тумблер в правом верхнем углу переключает светлую и тёмную темы и запоминает выбор в браузере.</li>
          <li><strong>Локальное хранение.</strong> Все данные (H2 + Spring Boot) остаются на вашем компьютере — можно безопасно экспериментировать.</li>
        </ol>
        <p>Удачных экспериментов с рационом!</p>
      </div>
    </div>

    <div id="about-modal" class="modal hidden">
      <div class="modal-card">
        <button class="close-btn" id="about-close" aria-label="Закрыть сведения об авторе">&times;</button>
        <h2>Об авторе</h2>
        <p><strong>Кашпирев Михаил Дмитриевич</strong></p>
        <p>Группа ИКБО-11-23. Курсовая работа: «Персональный генератор недельного плана питания».</p>
        <p>Цель: показать, как локальное приложение может формировать гибкий рацион без подписок и облака.</p>
      </div>
    </div>

    <div id="version-modal" class="modal hidden">
      <div class="modal-card">
        <button class="close-btn" id="version-close" aria-label="Закрыть сведения о версии">&times;</button>
        <h2>Версия приложения</h2>
        <ul>
          <li><strong>Версия:</strong> 0.0.1-SNAPSHOT</li>
          <li><strong>Дата сборки:</strong> 2025</li>
          <li><strong>Стек:</strong> Spring Boot 3, H2 Database, Lombok, Maven, Vanilla JS, CSS Variables</li>
        </ul>
        <p>Возможности: персонализированный расчёт калорий, дневные предпочтения, библиотека рецептов, модальное описание блюд, переключение темы.</p>
      </div>
    </div>

    <div id="notes-modal" class="modal hidden">
      <div class="modal-card">
        <button class="close-btn" id="notes-close" aria-label="Закрыть заметки">&times;</button>
        <h2>Личные заметки</h2>
        <p>Записывайте идеи, покупки или наблюдения во время планирования.</p>
        <div class="notes-modal-layout">
          <textarea id="notes-field" class="notes-textarea" placeholder="Например: купить шпинат и миндальное молоко..."></textarea>
          <div class="notes-list">
            <h3>Список заметок</h3>
            <div id="notes-empty" class="notes-empty">Пока ничего не записано.</div>
            <ul id="notes-items" class="notes-items" hidden></ul>
          </div>
        </div>
        <div class="actions" style="justify-content:flex-end;margin-top:1rem;">
          <button type="button" class="outline" id="notes-clear">Очистить</button>
          <button type="button" class="primary" id="notes-save">Сохранить</button>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
